<ion-header class="ion-no-border">
  <ion-toolbar class="my-profile__toolbar">
    <ion-buttons slot="start">
      <app-fy-menu-icon class="my-profile__menubutton" auto-hide="false"></app-fy-menu-icon>
    </ion-buttons>
    <ion-title mode="md" class="page-title">My Settings</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ng-container *ngIf="eou$ | async as eou">
    <app-employee-details-card [eou]="eou"></app-employee-details-card>
  </ng-container>
  <div class="my-profile__content-container">
    <div class="my-profile__section-header">Notifications</div>
    <div class="my-profile__card" [routerLink]="[ '/', 'enterprise', 'notifications' ]" matRipple>
      <div class="my-profile__card__title">Manage Notifications</div>
      <ion-icon
        class="my-profile__navigate-icon"
        src="../../../assets/svg/navigate-right.svg"
        slot="icon-only"
      ></ion-icon>
    </div>

    <div class="my-profile__section-header">Preferences</div>
    <div class="my-profile__preference-container">
      <app-preference-setting
        *ngIf="orgUserSettings?.insta_fyle_settings?.allowed"
        title="Extract receipt details"
        content="Turn paper receipts to expenses with our in-app camera."
        [isEnabled]="orgUserSettings.insta_fyle_settings.enabled"
        key="instaFyle"
        (preferenceChanged)="toggleSetting($event)"
      >
      </app-preference-setting>

      <app-preference-setting
        *ngIf="orgUserSettings?.bulk_fyle_settings?.allowed"
        title="Bulkfyle"
        content="Scan and submit multiple paper receipts at once."
        [isEnabled]="orgUserSettings.bulk_fyle_settings.enabled"
        key="bulkFyle"
        (preferenceChanged)="toggleSetting($event)"
      >
      </app-preference-setting>

      <app-preference-setting
        *ngIf="orgSettings?.org_expense_form_autofills?.allowed && orgSettings?.org_expense_form_autofills?.enabled && orgUserSettings?.expense_form_autofills?.allowed"
        title="Expense auto-fill"
        content="Auto-fill expense form fields based on most recently used values."
        [isEnabled]="orgUserSettings.expense_form_autofills.enabled"
        key="formAutofill"
        (preferenceChanged)="toggleSetting($event)"
      >
      </app-preference-setting>

      <app-preference-setting
        *ngIf="orgSettings?.org_currency_settings?.enabled"
        title="Default Currency"
        content="Select the default currency to be used for creating expenses."
        [isEnabled]="orgUserSettings.currency_settings.enabled"
        key="defaultCurrency"
        (preferenceChanged)="toggleSetting($event)"
      >
      </app-preference-setting>
    </div>

    <div class="my-profile__card" (click)="signOut()" matRipple>
      <div class="my-profile__signout-container display-flex">
        <ion-icon
          class="my-profile__signout-container__icon"
          src="../../../assets/svg/power.svg"
          slot="icon-only"
        ></ion-icon>
        <span>Sign Out</span>
      </div>
    </div>
  </div>
</ion-content>
