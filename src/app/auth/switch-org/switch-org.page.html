<ion-header mode="md">
  <ion-toolbar mode="md" class="switch-org--toolbar">
    <mat-form-field class="switch-org--form-field" appearance="outline">
      <span class="material-icons switch-org--search-icon" matPrefix> search </span>
      <input
        #searchOrgsInput
        [(ngModel)]="searchInput"
        id="switch-org--search-input"
        class="switch-org--search-input"
        matInput
        placeholder="Search Orgs"
      />
    </mat-form-field>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ng-container *ngIf="activeOrg$ | async as activeOrg">
    <ng-container *ngIf="primaryOrg$ | async as primaryOrg">
      <app-active-org-card [org]="activeOrg" [isPrimaryOrg]="activeOrg.id === primaryOrg.id"></app-active-org-card>
    </ng-container>
  </ng-container>

  <div class="switch-org__content-container">
    <div class="switch-org__content-container__content d-flex">
      <div>
        <div class="switch-org__content-container__content__title">Switch Organization</div>
        <div class="switch-org__content-container__content__sub-title">
          Select the organization you want to switch to.
        </div>
      </div>
      <ion-icon class="switch-org__content-container__content__icon" src="../../../assets/svg/fy-search.svg"></ion-icon>
    </div>

    <ng-container *ngIf="!isLoading">
      <ng-container *ngIf="filteredOrgs$ | async as filteredOrgs">
        <ng-container *ngIf="primaryOrg$ | async as primaryOrg">
          <app-org-card
            *ngFor="let org of filteredOrgs"
            [org]="org"
            [isPrimaryOrg]="org.id === primaryOrg.id"
            (selectOrg)="switchToOrg(org)"
          >
          </app-org-card>
        </ng-container>
      </ng-container>
    </ng-container>
  </div>

  <div *ngIf="isLoading">
    <div class="switch-org--org-element" *ngFor="let dummy of [1,2,3,4,5,6]">
      <ion-grid>
        <ion-row>
          <ion-col size="2">
            <div class="switch-org--org-thumb switch-org--org-thumb__no-border">
              <ion-skeleton-text animated></ion-skeleton-text>
            </div>
          </ion-col>
          <ion-col size="10">
            <div class="switch-org--org-element-name">
              <ion-skeleton-text animated></ion-skeleton-text>
            </div>
            <div class="switch-org--org-element-domain">
              <ion-skeleton-text animated></ion-skeleton-text>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
</ion-content>
